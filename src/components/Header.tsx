import {Link} from "react-router-dom";
import {useGetUser} from "../hooks/useGetUser.ts";
import {useActions} from "../hooks/useActions.ts";
import {useSubject} from "../hooks/useSubject.ts"


const Header = () => {
    const {user} = useGetUser()
    const {addUser} = useActions()
    
    const {setNumTheme, numTheme} = useSubject()
    const logout = () => {
        addUser(null) // При клике на выйти, выходит из аккаунта
        localStorage.setItem('token-user', '')
    }
    console.log('render Header')

    // onClick={() => setNumTheme(!numTheme)} className={numTheme ? "__theme" : ""}
 
    return (
        <header >
            <div className='container__header cl__container-size'>
                <Link to="/" id='logo'>
                    <svg className='logo_mob' width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M12.6713 5.99912C14.2859 5.99912 15.5958 4.65557 15.5958 2.99956C15.5958 1.34355 14.2859 0 12.6713 0C11.0568 0 9.74683 1.34355 9.74683 2.99956C9.74683 4.65557 11.0568 5.99912 12.6713 5.99912ZM18.429 15.3165L17.0094 14.5791L16.4184 12.7419C15.5227 9.95479 13.0247 8.00508 10.1916 7.99883C7.99822 7.99258 6.78577 8.62998 4.50709 9.5736C3.19106 10.1173 2.11265 11.1484 1.47901 12.4607L1.0708 13.3105C0.595563 14.2979 0.979405 15.4977 1.93596 15.9914C2.88643 16.4851 4.04404 16.0851 4.52537 15.0978L4.93358 14.2479C5.14683 13.8105 5.5002 13.4668 5.93888 13.2856L7.57173 12.6107L6.64564 16.4038C6.32881 17.7037 6.67001 19.0847 7.55345 20.0783L11.203 24.1652C11.6417 24.6589 11.9524 25.2526 12.1108 25.8962L13.2258 30.4768C13.4878 31.5454 14.5479 32.2015 15.5897 31.9328C16.6316 31.6641 17.2713 30.5768 17.0094 29.5082L15.6568 23.9465C15.4984 23.3028 15.1876 22.7029 14.749 22.2155L11.9768 19.1097L13.0247 14.8166L13.3598 15.8477C13.6827 16.8538 14.3773 17.6849 15.2912 18.1598L16.7108 18.8972C17.6613 19.3909 18.8189 18.991 19.3002 18.0036C19.7694 17.0225 19.3855 15.8102 18.429 15.3165ZM4.48272 24.109C4.28775 24.6151 3.9953 25.0713 3.61755 25.4525L0.571193 28.5833C-0.190398 29.3644 -0.190398 30.633 0.571193 31.4141C1.33278 32.1953 2.56351 32.1953 3.3251 31.4141L6.94418 27.7022C7.31583 27.321 7.60829 26.8648 7.80935 26.3586L8.63186 24.2464C5.26259 20.4782 6.27398 21.6343 5.74391 20.8907L4.48272 24.109Z"></path>
                    </svg>
                    <svg className='logo_pc' width="131" height="32" viewBox="0 0 131 32" fill="none">
                        <path d="M12.6713 5.99912C14.2859 5.99912 15.5958 4.65557 15.5958 2.99956C15.5958 1.34355 14.2859 0 12.6713 0C11.0568 0 9.74683 1.34355 9.74683 2.99956C9.74683 4.65557 11.0568 5.99912 12.6713 5.99912ZM18.429 15.3165L17.0094 14.5791L16.4184 12.7419C15.5227 9.95479 13.0247 8.00508 10.1916 7.99883C7.99822 7.99258 6.78577 8.62998 4.50709 9.5736C3.19106 10.1173 2.11265 11.1484 1.47901 12.4607L1.0708 13.3105C0.595563 14.2979 0.979405 15.4977 1.93596 15.9914C2.88643 16.4851 4.04404 16.0851 4.52537 15.0978L4.93358 14.2479C5.14683 13.8105 5.5002 13.4668 5.93888 13.2856L7.57173 12.6107L6.64564 16.4038C6.32881 17.7037 6.67001 19.0847 7.55345 20.0783L11.203 24.1652C11.6417 24.6589 11.9524 25.2526 12.1108 25.8962L13.2258 30.4768C13.4878 31.5454 14.5479 32.2015 15.5897 31.9328C16.6316 31.6641 17.2713 30.5768 17.0094 29.5082L15.6568 23.9465C15.4984 23.3028 15.1876 22.7029 14.749 22.2155L11.9768 19.1097L13.0247 14.8166L13.3598 15.8477C13.6827 16.8538 14.3773 17.6849 15.2912 18.1598L16.7108 18.8972C17.6613 19.3909 18.8189 18.991 19.3002 18.0036C19.7694 17.0225 19.3855 15.8102 18.429 15.3165ZM4.48272 24.109C4.28775 24.6151 3.9953 25.0713 3.61755 25.4525L0.571193 28.5833C-0.190398 29.3644 -0.190398 30.633 0.571193 31.4141C1.33278 32.1953 2.56351 32.1953 3.3251 31.4141L6.94418 27.7022C7.31583 27.321 7.60829 26.8648 7.80935 26.3586L8.63186 24.2464C5.26259 20.4782 6.27398 21.6343 5.74391 20.8907L4.48272 24.109Z"/>
                        <rect x="26" y="30" width="105" height="2" rx="1"/>
                        <path d="M40.5 15.3143C40.5 11.6253 37.5898 8.63495 33.9998 8.63495C30.4102 8.63495 27.5 11.6253 27.5 15.3143C27.5 16.0352 27.6126 16.7293 27.8186 17.3799C27.8186 17.3799 28.3656 19.9029 33.9591 27.4286C37.1618 23.1191 38.7091 20.452 39.4471 18.9578C40.1119 17.9095 40.5 16.6586 40.5 15.3143ZM33.9279 19.6186C31.6544 19.6186 29.811 17.7247 29.811 15.3882C29.811 13.0521 31.6544 11.1583 33.9279 11.1583C36.2013 11.1583 38.0447 13.0521 38.0447 15.3882C38.0443 17.7247 36.2013 19.6186 33.9279 19.6186Z"/>
                        <path d="M31.2507 29.4605C31.2448 29.4527 31.2391 29.4453 31.2333 29.4375C31.2274 29.4453 31.2218 29.4525 31.2158 29.4605H31.2507Z"/>
                        <path d="M56.2949 10.7812V25H53.8633V10.7812H56.2949ZM60.7578 10.7812V12.7344H49.4395V10.7812H60.7578ZM60.582 19.834V19.6094C60.582 18.8477 60.6927 18.1413 60.9141 17.4902C61.1354 16.8327 61.4544 16.263 61.8711 15.7812C62.2943 15.293 62.8086 14.9154 63.4141 14.6484C64.026 14.375 64.7161 14.2383 65.4844 14.2383C66.2591 14.2383 66.9492 14.375 67.5547 14.6484C68.1667 14.9154 68.6842 15.293 69.1074 15.7812C69.5306 16.263 69.8529 16.8327 70.0742 17.4902C70.2956 18.1413 70.4062 18.8477 70.4062 19.6094V19.834C70.4062 20.5957 70.2956 21.3021 70.0742 21.9531C69.8529 22.6042 69.5306 23.1738 69.1074 23.6621C68.6842 24.1439 68.1699 24.5215 67.5645 24.7949C66.959 25.0618 66.2721 25.1953 65.5039 25.1953C64.7292 25.1953 64.0358 25.0618 63.4238 24.7949C62.8184 24.5215 62.304 24.1439 61.8809 23.6621C61.4577 23.1738 61.1354 22.6042 60.9141 21.9531C60.6927 21.3021 60.582 20.5957 60.582 19.834ZM62.9355 19.6094V19.834C62.9355 20.3092 62.9844 20.7585 63.082 21.1816C63.1797 21.6048 63.3327 21.9759 63.541 22.2949C63.7493 22.6139 64.0163 22.8646 64.3418 23.0469C64.6673 23.2292 65.0547 23.3203 65.5039 23.3203C65.9401 23.3203 66.3177 23.2292 66.6367 23.0469C66.9622 22.8646 67.2292 22.6139 67.4375 22.2949C67.6458 21.9759 67.7988 21.6048 67.8965 21.1816C68.0007 20.7585 68.0527 20.3092 68.0527 19.834V19.6094C68.0527 19.1406 68.0007 18.6979 67.8965 18.2812C67.7988 17.8581 67.6426 17.4837 67.4277 17.1582C67.2194 16.8327 66.9525 16.5788 66.627 16.3965C66.3079 16.2077 65.9271 16.1133 65.4844 16.1133C65.0417 16.1133 64.6576 16.2077 64.332 16.3965C64.013 16.5788 63.7493 16.8327 63.541 17.1582C63.3327 17.4837 63.1797 17.8581 63.082 18.2812C62.9844 18.6979 62.9355 19.1406 62.9355 19.6094ZM78.7363 22.5098V14.4336H81.0996V25H78.873L78.7363 22.5098ZM79.0684 20.3125L79.8594 20.293C79.8594 21.0026 79.7812 21.6569 79.625 22.2559C79.4688 22.8483 79.2279 23.3659 78.9023 23.8086C78.5768 24.2448 78.1602 24.5866 77.6523 24.834C77.1445 25.0749 76.5358 25.1953 75.8262 25.1953C75.3118 25.1953 74.8398 25.1204 74.4102 24.9707C73.9805 24.821 73.6094 24.5898 73.2969 24.2773C72.9909 23.9648 72.7533 23.5579 72.584 23.0566C72.4147 22.5553 72.3301 21.9564 72.3301 21.2598V14.4336H74.6836V21.2793C74.6836 21.6634 74.7292 21.9857 74.8203 22.2461C74.9115 22.5 75.0352 22.7051 75.1914 22.8613C75.3477 23.0176 75.5299 23.1283 75.7383 23.1934C75.9466 23.2585 76.168 23.291 76.4023 23.291C77.0729 23.291 77.6003 23.1608 77.9844 22.9004C78.375 22.6335 78.6517 22.2754 78.8145 21.8262C78.9837 21.377 79.0684 20.8724 79.0684 20.3125ZM85.875 16.4453V25H83.5215V14.4336H85.7676L85.875 16.4453ZM89.1074 14.3652L89.0879 16.5527C88.9447 16.5267 88.7884 16.5072 88.6191 16.4941C88.4564 16.4811 88.2936 16.4746 88.1309 16.4746C87.7272 16.4746 87.3724 16.5332 87.0664 16.6504C86.7604 16.7611 86.5033 16.9238 86.2949 17.1387C86.0931 17.347 85.9368 17.6009 85.8262 17.9004C85.7155 18.1999 85.6504 18.5352 85.6309 18.9062L85.0938 18.9453C85.0938 18.2812 85.1589 17.666 85.2891 17.0996C85.4193 16.5332 85.6146 16.0352 85.875 15.6055C86.1419 15.1758 86.474 14.8405 86.8711 14.5996C87.2747 14.3587 87.7402 14.2383 88.2676 14.2383C88.4108 14.2383 88.5638 14.2513 88.7266 14.2773C88.8958 14.3034 89.0228 14.3327 89.1074 14.3652ZM96.1484 18.5742H92.5254L92.5059 16.7871H95.6699C96.2038 16.7871 96.6562 16.709 97.0273 16.5527C97.4049 16.39 97.6914 16.1589 97.8867 15.8594C98.082 15.5534 98.1797 15.1855 98.1797 14.7559C98.1797 14.2806 98.0885 13.8932 97.9062 13.5938C97.724 13.2943 97.444 13.0762 97.0664 12.9395C96.6953 12.8027 96.2201 12.7344 95.6406 12.7344H93.2676V25H90.8164V10.7812H95.6406C96.4219 10.7812 97.1185 10.8561 97.7305 11.0059C98.349 11.1556 98.873 11.39 99.3027 11.709C99.7389 12.0215 100.068 12.4186 100.289 12.9004C100.517 13.3822 100.631 13.9551 100.631 14.6191C100.631 15.2051 100.491 15.7422 100.211 16.2305C99.931 16.7122 99.5176 17.1061 98.9707 17.4121C98.4238 17.7181 97.7435 17.9004 96.9297 17.959L96.1484 18.5742ZM96.041 25H91.7539L92.8574 23.0566H96.041C96.5944 23.0566 97.0566 22.9655 97.4277 22.7832C97.7988 22.5944 98.0755 22.3372 98.2578 22.0117C98.4466 21.6797 98.541 21.2923 98.541 20.8496C98.541 20.3874 98.4596 19.987 98.2969 19.6484C98.1341 19.3034 97.877 19.0397 97.5254 18.8574C97.1738 18.6686 96.7148 18.5742 96.1484 18.5742H93.3945L93.4141 16.7871H96.998L97.5547 17.4609C98.3359 17.487 98.9772 17.6595 99.4785 17.9785C99.9863 18.2975 100.364 18.7109 100.611 19.2188C100.859 19.7266 100.982 20.2734 100.982 20.8594C100.982 21.7643 100.784 22.5228 100.387 23.1348C99.9961 23.7467 99.4329 24.2122 98.6973 24.5312C97.9616 24.8438 97.0762 25 96.041 25ZM102.77 19.834V19.6094C102.77 18.8477 102.88 18.1413 103.102 17.4902C103.323 16.8327 103.642 16.263 104.059 15.7812C104.482 15.293 104.996 14.9154 105.602 14.6484C106.214 14.375 106.904 14.2383 107.672 14.2383C108.447 14.2383 109.137 14.375 109.742 14.6484C110.354 14.9154 110.872 15.293 111.295 15.7812C111.718 16.263 112.04 16.8327 112.262 17.4902C112.483 18.1413 112.594 18.8477 112.594 19.6094V19.834C112.594 20.5957 112.483 21.3021 112.262 21.9531C112.04 22.6042 111.718 23.1738 111.295 23.6621C110.872 24.1439 110.357 24.5215 109.752 24.7949C109.146 25.0618 108.46 25.1953 107.691 25.1953C106.917 25.1953 106.223 25.0618 105.611 24.7949C105.006 24.5215 104.492 24.1439 104.068 23.6621C103.645 23.1738 103.323 22.6042 103.102 21.9531C102.88 21.3021 102.77 20.5957 102.77 19.834ZM105.123 19.6094V19.834C105.123 20.3092 105.172 20.7585 105.27 21.1816C105.367 21.6048 105.52 21.9759 105.729 22.2949C105.937 22.6139 106.204 22.8646 106.529 23.0469C106.855 23.2292 107.242 23.3203 107.691 23.3203C108.128 23.3203 108.505 23.2292 108.824 23.0469C109.15 22.8646 109.417 22.6139 109.625 22.2949C109.833 21.9759 109.986 21.6048 110.084 21.1816C110.188 20.7585 110.24 20.3092 110.24 19.834V19.6094C110.24 19.1406 110.188 18.6979 110.084 18.2812C109.986 17.8581 109.83 17.4837 109.615 17.1582C109.407 16.8327 109.14 16.5788 108.814 16.3965C108.495 16.2077 108.115 16.1133 107.672 16.1133C107.229 16.1133 106.845 16.2077 106.52 16.3965C106.201 16.5788 105.937 16.8327 105.729 17.1582C105.52 17.4837 105.367 17.8581 105.27 18.2812C105.172 18.6979 105.123 19.1406 105.123 19.6094ZM116.148 14.4336L118.16 17.9395L120.211 14.4336H122.799L119.596 19.6191L122.926 25H120.338L118.189 21.3477L116.041 25H113.443L116.764 19.6191L113.57 14.4336H116.148Z"/>
                    </svg>  
                </Link>
                <div className='container__theme'>
                    <div className="toggleWrapper">
                        <input onClick={() => setNumTheme(!numTheme)} className={numTheme ? "__theme" : ""} type="checkbox" id="dn"/>
                        <label htmlFor="dn" className="toggle">
                            <span className="toggle__handler">
                                <span className="crater crater--1"></span>
                                <span className="crater crater--2"></span>
                                <span className="crater crater--3"></span>
                            </span>
                            <span className="star star--1"></span>
                            <span className="star star--2"></span>
                            <span className="star star--3"></span>
                            <span className="star star--4"></span>
                            <span className="star star--5"></span>
                            <span className="star star--6"></span>
                        </label>
                    </div>
                </div>
                <div className="search" >
                    <input className='search__line' type="search" placeholder='Введите город'/>
                    <input type="submit" value="" id='bntSubmit'/>
                </div>
                <div>
                    {
                        user
                            ? <div style={{

                                display:'flex', 
                                alignItems:'center',
                                marginRight:'20px',
                                fontSize:'14px',
                                fontWeight: '450'
                                
                            
                            }}>
                                <Link style={{

                                    display:'flex', 
                                    alignItems:'center', 
                                    height:'28px', 
                                    background:'var(--colWhite_400)',
                                    color:'#23A6FF',
                                    borderRadius:'8px',
                                    padding:'8px'

                                }} to={`/user/${user.id}`}>{user.name}</Link>
                                <button style={{
                                    
                                    display:'flex', 
                                    alignItems:'center', 
                                    height:'28px', 
                                    marginLeft:'15px', 
                                    background:'var(--colWhite_400)',
                                    color:'#23A6FF',
                                    borderRadius:'8px',
                                    padding:'8px'
                                    
                                }} onClick={logout}>Выйти</button>
                            </div>
                            : <div style={{

                                display:'flex', 
                                alignItems:'center',
                                marginRight:'20px',
                                fontSize:'14px',
                                fontWeight: '450'

                            }}>
                                <Link style={{

                                    display:'flex', 
                                    alignItems:'center', 
                                    height:'28px', 
                                    background:'var(--colWhite_400)',
                                    color:'#23A6FF',
                                    borderRadius:'8px',
                                    padding:'8px'

                                }} to='/login'>Вход</Link>
                                <Link style={{

                                    display:'flex', 
                                    alignItems:'center', 
                                    height:'28px', 
                                    marginLeft:'15px', 
                                    background:'var(--colWhite_400)',
                                    color:'#23A6FF',
                                    borderRadius:'8px',
                                    padding:'8px'

                                }} to='/registration'>Регистрация</Link>
                            </div>
                    }
                </div>
            </div>
        </header>
    );
};

export default Header;